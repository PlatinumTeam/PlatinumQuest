//--- INFO BEGIN ---
//Mission information for the level select. Generated from the MissionInfo object except with extra goodies.
function LB_PQ_BagOfSecrets_GetMissionInfo() {
	return
new ScriptObject() {
		name = "Bag of Secrets...";
		type = "Advanced";
		level = "24";
		desc = "Most is magnificent...\nAll is...?";
		artist = "Phil, fixed by Threefolder";
		music = "Maze.ogg";
		game = "PlatinumQuest";
		gameMode = "Quota";
		Time = "180000";
		platinumTime = "60000";
		ultimateTime = "41000";
		awesomeTime = "20600";
		generalHint = "Be careful on the thin paths, and watch out for surprises.\nThere\'s a Gem right behind the start pad, so you really only have to collect 9 on the main structure to be able to finish.";
		ultimateHint = "Just go for the Gems that are lowest on the structure. The ones near the top aren\'t necessary and may just waste your time.";
		awesomeHint = "You may want to skip one or two of the Gems closest to the start and do a cool edge hit instead.";
		eggHint = "Did you read the level's description?";
		CustomRadarRule = $Radar::Flags::Gems | $Radar::Flags::EndPad | $Radar::Flags::Powerups;
		alarmStartTime = "25";
		easterEgg = "1";
		GemQuota = "10";
		gems = "20";
		interior0 = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
		interiors = "1";
		maxScore = "20";
		requirements = "Finish Advanced Techniques.";
		trivia = "PlatinumQuest originally had you unlock all levels in your own path, and this level was supposed to have an alternative exit that allowed you to skip further on the quest.";
		unlockFunc = "unlock_LB_BagOfSecrets";
};
}
//--- INFO END ---
//--- UNLOCK BEGIN ---
function unlock_LB_BagOfSecrets(%mission) {
	return Unlock::hasBeatMissionPar(getMissionInfo($usermods @ "/data/lbmissions_pq/beginner/AdvancedTechniques.mcs"));
}
//--- UNLOCK END ---
//Don't continue loading if this just wants the mission info
if ($loadingMissionInfo) return;
//--- CLIENT SCRIPTS BEGIN ---
//Put any scripts that will be loaded on all clients (in MP / SP) here.
// Note: these will be loaded by dedicated servers too, so be sure to test for
// $Server::Dedicated before creating any GUI.

//--- CLIENT SCRIPTS END ---
//Don't continue loading if this is a client (non-server)
if (!$Server::Hosting || $Server::_Dedicated) return;
//--- SERVER PREMISSION SCRIPTS BEGIN ---
//DO NOT DELETE THIS LINE Bagofsecrets
// It's safe to create your own datablocks, they'll be deleted when the mission is destroyed

datablock TriggerData(secretAreaTrigger)
{
   tickPeriodMS = 100;
};

//--- SERVER PREMISSION SCRIPTS END ---
//--- MISSION BEGIN ---
function LB_PQ_BagOfSecrets_LoadMission() {
	return
new SimGroup(MissionGroup) {

	new SimGroup(MissionData) {

		new MissionArea(MissionArea) {
			area = "-360 -648 720 1296";
			flightCeiling = "300";
			flightCeilingRange = "20";
				locked = "true";
		};
		new Sky(Sky) {
			position = "336 136 0";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			cloudHeightPer[0] = "0";
			cloudHeightPer[1] = "0";
			cloudHeightPer[2] = "0";
			cloudSpeed1 = "0.0001";
			cloudSpeed2 = "0.0002";
			cloudSpeed3 = "0.0003";
			visibleDistance = "500";
			useSkyTextures = "0";
			renderBottomTexture = "1";
			SkySolidColor = "0.200000 0.150000 0.200000 1.000000";
			fogDistance = "300";
			fogColor = "0.600000 0.600000 0.600000 1.000000";
			fogVolume1 = "-1 7.45949e-031 1.3684e-038";
			fogVolume2 = "-1 1.07208e-014 8.756e-014";
			fogVolume3 = "-1 5.1012e-010 2.05098e-008";
			materialList = "~/data/skies_pq/Blender3/blender3.dml";
			windVelocity = "1 0 0";
			windEffectPrecipitation = "0";
			noRenderBans = "1";
			fogVolumeColor1 = "128.000000 128.000000 128.000000 0.000000";
			fogVolumeColor2 = "128.000000 128.000000 128.000000 0.000004";
			fogVolumeColor3 = "128.000000 128.000000 128.000000 14435505.000000";
		};
		new Sun(Sun1) {
			direction = "0.638261 0.459006 -0.61801";
			color = "0.300000 0.200000 0.300000 0.000000";
			ambient = "0.300000 0.300000 0.300000 1.000000";
		};
	};
	new SimGroup(InteriorGroup) {

		new InteriorInstance() {
			position = "0 0 0";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			interiorFile = "~/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
			showTerrainInside = "0";
		};
	};
	new SimGroup(SceneryGroup) {

		new StaticShape() {
			position = "-9.6865 3.59999 -1.89822";
			rotation = "1 0 0 0";
			scale = "0.75 0.75 1";
			dataBlock = "OrbitingClouds";
		};
		new StaticShape() {
			position = "-9.6865 3.59999 -1.82322";
			rotation = "1 0 0 0";
			scale = "2 2 1";
			dataBlock = "OrbitingClouds";
				reverse = "1";
		};
	};
	new SimGroup(MPGroup) {

		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-34 0 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "5000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-34 0 -3.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-17 21.625 12.0313";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "1.0000000 -1.1250000 0.0312500 -2.0000000 0.0000000 0.0000000 0.0000000 2.2500000 0.0000000 0.0000000 0.0000000 -0.0625000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "10";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-34 0 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "5000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-34 0 -3.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-17 19.375 12.0313";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "1.0000000 -0.8750000 0.0312500 -2.0000000 0.0000000 0.0000000 0.0000000 1.7500000 0.0000000 0.0000000 0.0000000 -0.0625000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "9";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-34 0 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "5000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-34 0 -3.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-17 16.875 12.0313";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "1.5000000 -1.3750000 0.0312500 -3.0000000 0.0000000 0.0000000 0.0000000 2.7500000 0.0000000 0.0000000 0.0000000 -0.0625000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "8";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-34 0 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "5000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-34 0 -3.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-17 14.625 12.0313";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "1.9999995 -0.6250000 0.0312500 -3.9999990 0.0000000 0.0000000 0.0000000 1.2500000 0.0000000 0.0000000 0.0000000 -0.0625000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "7";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "0 0 0";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "20";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "0 0 0";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-19.875 21.125 22.125";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "50";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-19.875 21.125 23.125";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "950";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-19.875 21.125 22.125";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "2";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger() {
				position = "-19.75 21.125 23.25";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "0.7500000 -0.6250000 0.2500000 -1.5000000 0.0000000 0.0000000 0.0000000 1.2500000 0.0000000 0.0000000 0.0000000 -0.5000000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "-1";
			};
			new PathedInterior(secretFinishButton) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "5";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-34 0 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "5000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-34.025 -0.075 -0.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-12.75 26.375 12.25";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "0.7500000 -0.3750000 0.2500000 -1.5000000 0.0000000 0.0000000 0.0000000 0.7500000 0.0000000 0.0000000 0.0000000 -0.5000000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-21 5.5 3";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "1000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-21 5.5 10";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(topBonusTrigger) {
				position = "-17.25 30 13";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "-3.2500000 -2.0000000 -1.0000000 6.5000000 0.0000000 0.0000000 0.0000000 4.0000000 0.0000000 0.0000000 0.0000000 2.0000000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
			new Trigger(crushwall) {
				position = "-21 25 4.5";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "HelpTrigger";
				polyhedron = "-1.0000000 -1.0000000 -0.5000000 2.0000000 0.0000000 0.0000000 0.0000000 2.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
					displayonce = "0";
					extended = "0";
					persistTime = "3000";
					text = "Don\'t get crushed into the wall.";
			};
			new PathedInterior(topAreaPathedInterior) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "4";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(towerCatapult_g) {

			new Path() {

				new Marker() {
					position = "8.5 20.5 9.5";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "1000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "8.5 20.5 9";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "50";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "8.5 20.5 9.5";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "2";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new PathedInterior(secretCatapult) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "3";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-3.5 16.5 -0.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "2500";
					smoothingType = "Accelerate";
				};
				new Marker() {
					position = "-0.75 19.25 -3.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "2500";
					smoothingType = "Accelerate";
				};
				new Marker() {
					position = "-3.5 16.5 -0.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "2";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-3.5 16.5 0.25";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "-3.5000000 -3.5000000 -0.2500000 7.0000000 0.0000000 0.0000000 0.0000000 7.0000000 0.0000000 0.0000000 0.0000000 0.5000000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "2";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-17 8.25 8.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "1500";
					smoothingType = "Accelerate";
				};
				new Marker() {
					position = "-17 8.25 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Accelerate";
				};
			};
			new Trigger(MustChange) {
				position = "-18 8 7.75";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "-2.0000000 -2.0000000 -0.2500000 4.0000000 0.0000000 0.0000000 0.0000000 4.0000000 0.0000000 0.0000000 0.0000000 0.5000000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "0";
			};
			new Trigger(MustChange) {
				position = "-16.625 8.75 8.75";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "-0.6250000 -1.2500000 -0.2500000 1.2500000 0.0000000 0.0000000 0.0000000 2.5000000 0.0000000 0.0000000 0.0000000 0.5000000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "1500";
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "1";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-17 27 4.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "2000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-17 13 4.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "2000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-17 27 4.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "2";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "0";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "-1";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-34 0 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "5000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-34 0 -3.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-17.25 23.875 12.0313";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "1.2500000 -0.8750000 0.0312500 -2.5000000 0.0000000 0.0000000 0.0000000 1.7500000 0.0000000 0.0000000 0.0000000 -0.0625000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
			new PathedInterior(MustChange) {
				position = "0 0 0";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "PathedDefault";
				interiorResource = $usermods @ "/data/lbinteriors_pq/advanced/bagOfSecrets.dif";
				interiorIndex = "11";
				basePosition = "0 0 0";
				baseRotation = "1 0 0 0";
				baseScale = "1 1 1";
					initialScale = "1 1 1";
					initialTargetPosition = "0";
					initialTransform = "0 0 0 1 0 0 0";
			};
		};
		new SimGroup(MustChange_g) {

			new Path() {

				new Marker() {
					position = "-34 0 11.75";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "0";
					msToNext = "5000";
					smoothingType = "Linear";
				};
				new Marker() {
					position = "-34 0 -3.25";
					rotation = "1 0 0 0";
					scale = "1 1 1";
					seqNum = "1";
					msToNext = "0";
					smoothingType = "Linear";
				};
			};
			new Trigger(MustChange) {
				position = "-17.5 25.625 12.0313";
				rotation = "1 0 0 0";
				scale = "1 1 1";
				dataBlock = "TriggerGotoTarget";
				polyhedron = "2.0000143 -0.6250000 0.0312500 -4.0000286 0.0000000 0.0000000 0.0000000 1.2500000 0.0000000 0.0000000 0.0000000 -0.0625000";
					IContinueToTTime = "0";
					instant = "0";
					targetTime = "5000";
			};
		};
	};
	new SimGroup(ItemGroup) {

		new Item() {
			position = "-13.5 32.35 2.55";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "TimeTravelItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				timeBonus = "5000";
		};
		new Item(topAreaTimeTravel) {
			position = "-22.5 4.5 13";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "TimeTravelItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				timeBonus = "5000";
		};
		new Item(secretGravityItem1) {
			position = "8.5 20.5 13";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "AntiGravityItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
		};
		new Item() {
			position = "-3.825 24.675 2";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "ShockAbsorberItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
		};
	};
	new SimGroup(HazardGroup) {

		new StaticShape() {
			position = "-14.25 22.25 40";
			rotation = "0.707388 -0.706825 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
		new StaticShape() {
			position = "-10.25 24.25 40";
			rotation = "0 1 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
		new StaticShape() {
			position = "-14.2556 18.75 40";
			rotation = "0 1 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
		new StaticShape() {
			position = "-10.2502 16.7504 40";
			rotation = "0.707388 -0.706825 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
		new StaticShape() {
			position = "-8.5 23 40";
			rotation = "0.710914 0.703279 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
		new StaticShape() {
			position = "-6.25 21.5 40";
			rotation = "0 1 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
		new StaticShape() {
			position = "-8.25 18.25 40";
			rotation = "1 0 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
		new StaticShape() {
			position = "-16 20.5093 40";
			rotation = "0.707388 0.706825 0 180";
			scale = "1.5 1.5 1.5";
			dataBlock = "RoundBumper_PQ";
		};
	};
	new SimGroup(GemGroup) {

		new Item() {
			position = "4.175 20.6 6.675";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-13.775 29.2 15.5";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-16.975 9.05 7.525";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-21.6 3.25 5.15";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-3.25 -0.25 -1";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-20 32.125 2.05";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "10.325 18.5 6";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "5.75 21 2";
			rotation = "1 0 0 0";
			scale = "0.9 0.9 0.9";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-12.5 26.5 10";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-17 25 11";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-22.35 10.2 3.65";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-23.5 16.5 0.5";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-17.25 25 8.5625";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-13 23 1.5";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-17.5 30 12.5";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-13.5 9.5 2";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-21.5 27.5 -2";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-19.225 23.5 0.5";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "-22.5 29.5 0";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
		new Item() {
			position = "2 22 -3";
			rotation = "1 0 0 0";
			scale = "1 1 1";
			dataBlock = "GemItem_PQ";
			collideable = "0";
			static = "1";
			rotate = "0";
				noParticles = "0";
		};
	};
	new SimGroup(PathNodeGroup) {

		new StaticShape(CameraPath1) {
			position = "5.63187 6.67651 10.2417";
			rotation = "0.223675 0.126215 -0.966457 60.5582";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath2";
				timeToNext = "2000";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath2) {
			position = "2.40721 15.254 8.71167";
			rotation = "0.1078 0.0868636 -0.990371 78.2651";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath3";
				timeToNext = "3000";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath3) {
			position = "-7.91953 24.4297 6.82647";
			rotation = "0.159845 0.246139 -0.955963 116.335";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath4";
				timeToNext = "0";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath4) {
			position = "-27.3937 33.1978 20.21";
			rotation = "0.119852 -0.326159 0.937687 141.976";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath5";
				timeToNext = "3000";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath5) {
			position = "-19.8303 30.9031 16.5359";
			rotation = "0.0246158 -0.264183 0.964158 169.733";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath6";
				timeToNext = "3000";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath6) {
			position = "-14.7723 24.2747 13.6871";
			rotation = "-0.0404541 -0.18642 0.981637 204.051";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath7";
				timeToNext = "0";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath7) {
			position = "-26.795 0.297084 12.2561";
			rotation = "0.700523 -0.234737 0.673918 52.8754";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath8";
				timeToNext = "3000";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath8) {
			position = "-27.4139 7.7854 8.89808";
			rotation = "0.532764 -0.246278 0.809635 59.4488";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath9";
				timeToNext = "3000";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath9) {
			position = "-25.5811 15.7073 5.66343";
			rotation = "0.315053 -0.223715 0.92233 75.1843";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath10";
				timeToNext = "2500";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath10) {
			position = "-20.6533 20.9483 3.25573";
			rotation = "0.129618 -0.141541 0.98141 96.1056";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath11";
				timeToNext = "2500";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath11) {
			position = "-14.2347 22.9381 1.71647";
			rotation = "-0.056188 0.0706802 0.995915 103.262";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath12";
				timeToNext = "5000";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
		new StaticShape(CameraPath12) {
			position = "-14.2347 22.9381 1.71647";
			rotation = "-0.056188 0.0706802 0.995915 103.262";
			scale = "1 1 1";
			dataBlock = "PathNode";
				nextNode = "CameraPath1";
				timeToNext = "0";
				usePosition = "1";
				useRotation = "1";
				useScale = "0";
				reverseRotation = "0";
				placed = "1";
		};
	};
	new StaticShape(EndPoint) {
		position = "-4 2 0";
		rotation = "0 0 1 180";
		scale = "1 1 1";
		dataBlock = "EndPad_PQ";
	};
	new Trigger(Bounds) {
		position = "-50 50 -4";
		rotation = "1 0 0 0";
		scale = "100 100 50";
		dataBlock = "InBoundsTrigger";
		polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
			isEnabled = "1";
	};
	new Trigger() {
		position = "7 22 10";
		rotation = "1 0 0 0";
		scale = "3 3 1";
		dataBlock = "secretAreaTrigger";
		polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
			Time = "500";
	};
	new StaticShape(StartPoint) {
		position = "-2 6 0";
		rotation = "1 0 0 0";
		scale = "1 1 1";
		dataBlock = "StartPad_PQ";
	};
	new Item() {
		position = "-28.75 21 38.5889";
		rotation = "1 0 0 180";
		scale = "1 1 1";
		dataBlock = "NestEgg_PQ";
		collideable = "0";
		static = "1";
		rotate = "0";
			noRespawn = "0";
			skin = "black";
	};
	new StaticShape() {
		position = "-12.3148 17.5003 40";
		rotation = "0.710914 0.703279 0 180";
		scale = "1.5 1.5 1.5";
		dataBlock = "RoundBumper_PQ";
	};
	new StaticShape() {
		position = "-0.25 20.5 40";
		rotation = "1 0 0 180";
		scale = "2 2 2";
		dataBlock = "Nuke_PQ";
			resettime = "0";
	};
	new StaticShape() {
		position = "-4.25 20.5 40";
		rotation = "1 0 0 180";
		scale = "1.75 1.75 1.75";
		dataBlock = "RoundBumper_PQ";
	};
	new StaticShape() {
		position = "-6.25 19.5 40";
		rotation = "1 0 0 180";
		scale = "1.5 1.5 1.5";
		dataBlock = "RoundBumper_PQ";
	};
	new StaticShape() {
		position = "-12.25 23.5 40";
		rotation = "0.710914 0.703279 0 180";
		scale = "1.5 1.5 1.5";
		dataBlock = "RoundBumper_PQ";
	};
	new StaticShape() {
		position = "-19.5 20.5 39";
		rotation = "1 0 0 180";
		scale = "0.35 0.35 0.35";
		dataBlock = "IceSlick3";
	};
	new StaticShape() {
		position = "3.75 20.5 38.2312";
		rotation = "0.963897 0 -0.266274 180";
		scale = "2 2 2";
		dataBlock = "LandMine_PQ";
			resettime = "Default";
	};
	new StaticShape() {
		position = "-22 20.5 39";
		rotation = "1 0 0 180";
		scale = "0.35 0.35 0.35";
		dataBlock = "IceSlick3";
	};
	new StaticShape() {
		position = "-20.75 20.5 39";
		rotation = "1 0 0 180";
		scale = "1 1 1";
		dataBlock = "LandMine_PQ";
			resettime = "Default";
	};
	new StaticShape() {
		position = "-28.75 23 37.5";
		rotation = "-1 0 0 90.0002";
		scale = "1 1 1";
		dataBlock = "SmallDuctFan_PQ";
	};
	new StaticShape() {
		position = "7.85 20.5 36.5";
		rotation = "-0.707106 0.707108 8.96324e-007 180";
		scale = "0.5 0.5 0.5";
		dataBlock = "Checkpoint_PQ";
			disableOOB = "0";
			gravity = "1";
	};
};
}
//--- MISSION END ---
//--- SERVER POSTMISSION SCRIPTS BEGIN ---

function missionStartup()
{
   // Disable/deactivate everything
   secretGravityItem1.hide(true);
   topAreaTimeTravel.hide(true);
   secretCatapult.setTargetPosition(0);
}

function secretAreaTrigger::onEnterTrigger(%this, %trigger, %obj) {
	if (%obj.client.getGemCount() == $Game::GemCount) {
		if ($Time::CurrentTime < MissionInfo.time) {
			// Make the catapult loop
			secretCatapult.setTargetPosition(-1);

			// Show the hidden time travel and the gravity modifier to get back to the normal area
			secretGravityItem1.hide(false);
			secretGravityItem1.startFade(2000, 1000, false);

			%line = "A new challenge awaits you, step aboard!";
		} else {
			%line = "Sorry, next time be quicker!";
		}
	} else {
		%line = "Sorry, keep searching...";
	}

	cancel(%obj.client.downsched);
	%obj.client.addBubbleLine(%line, 0, 4000);
	%obj.client.downsched = %obj.client.schedule(4000, hideBubble);
}

//--- SERVER POSTMISSION SCRIPTS END ---